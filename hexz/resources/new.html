<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

    <title>Hexz</title>
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            background-color: #1e1e1e;
            color: #cbcbcb;
        }
        a:link,
        a:visited,
        a:hover,
        a:active {
            color: #92acd9;
        }

        body {
            font-family: arial, sans-serif;
        }

        h1,
        h2,
        p,
        div {
            text-align: center;
        }

        div.centered {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        div.spacer {
            margin-top: 1ex;
        }

        .gameButton {
            min-width: 10em;
        }
        th, td {
            text-align: left;
            padding-right: 1em;
        }
    </style>
</head>

<body>
    <h1>Start a new game</h1>
    <p>
        Please select the game you want to play.
    </p>
    <div class="centered">
        <form action="/hexz/new" method="post">
            <input type="hidden" name="type" id="type" value="classic">
            <input class="gameButton" type="submit" value="Classic">
        </form>
    </div>
    <div class="centered spacer">
        <form action="/hexz/new" method="post">
            <input type="hidden" name="type" id="type" value="snakez">
            <input class="gameButton" type="submit" value="Snakez">
        </form>
    </div>
    <div class="centered spacer">
        <form action="/hexz/new" method="post">
            <input type="hidden" name="type" id="type" value="freeform">
            <input class="gameButton" type="submit" value="Freeform">
        </form>
    </div>

    <h1>Join a game</h1>
    <div class="centered" id="activeGames">
        <table>
            <thead>
                <tr>
                    <th>Host</th>
                    <th>Game</th>
                </tr>
            </thead>
            <tbody id="activeGamesTbody">
            </tbody>
        </table>
    </div>
    <script type="text/javascript">
        async function getActiveGames() {
            const resp = await fetch("/hexz/gamez");
            const games = await resp.json();
            const tbody = document.getElementById("activeGamesTbody");
            for (const g of games) {
                tbody.insertAdjacentHTML("beforeend", 
                `<tr>
                    <td>${g.host}</td>
                    <td><a href="/hexz/${g.id}">${g.id}</a></td>
                </tr>`);
            }
        }

        getActiveGames();
    </script>
</body>

</html>